<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>앱 서비스 아키텍처와 네트워크</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/black.min.css" id="theme">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/monokai.min.css">

    <style>
        /* 이미지 스타일 조정: 배경 투명, 최대 높이 제한 */
        .reveal section img {
            border: none;
            box-shadow: none;
            background: transparent;
            max-height: 450px;
        }
        /* 텍스트 강조 색상 */
        .highlight { color: #42affa; font-weight: bold; }
    </style>
</head>
<body>

<div class="reveal">
    <div class="slides">
        <section data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
            <script type="text/template">

# 앱 서비스 아키텍처와<br>네트워크

<br>
<small>네트워크 기초부터 Java 백엔드 구조와 에러 분석까지</small>

---

## 1. 인트로 (Introduction)

--

### 왜 이 지식이 필요한가?

* **빙산의 일각:** 앱 화면(Frontend) 뒤의 거대한 시스템(Network, Backend, DB) 이해
* **기대 효과:**
    * 개발자와의 소통 비용 감소 <br>("안 돼요" ➡️ "400 에러입니다")
    * 이슈 발생 구간의 빠른 판단 (앱 vs 서버 vs 네트워크)

---

## 2. 네트워크와 RESTful

--

### 네트워크 통신의 기본 요소

* **Client:** 요청하는 앱/웹
* **Server:** 응답하는 백엔드
* **DNS:** 주소록 (`naver.com` → IP)

<img src="images/client_server.png" alt="Client Server Architecture" height=80>

--

### RESTful API란?

> **RE**presentational **S**tate **T**ransfer

* **핵심 3요소:**
    1. **자원 (Resource):** URI (`/users`)
    2. **행위 (Verb):** Method (`GET`, `POST`)
    3. **표현 (Representation):** `JSON`, `XML`

--

### RESTful 디자인 예시

| 행위 | 나쁜 예 (Not RESTful) | 좋은 예 (RESTful) |
|:---:|:---|:---|
| **조회** | POST /getUser | <span class="highlight">GET</span> /users/1 |
| **생성** | GET /createUser | <span class="highlight">POST</span> /users |
| **수정** | POST /updateUser | <span class="highlight">PUT</span> /users/1 |
| **삭제** | GET /deleteUser | <span class="highlight">DELETE</span> /users/1 |

---

## 3. 서버 아키텍처의 진화

--

### Monolithic vs MSA

<img src="images/mono_vs_msa.png" alt="Monolithic vs MSA">

* **Monolithic:** 관리 단순 / 전체 배포 필요
* **MSA:** 장애 격리 / 구조 복잡

---

## 4. Java 백엔드 구조

--

### Java Spring Boot 계층 구조

요청이 들어오면 공장이 가동됩니다.

<img src="images/java_layered_arch.png" alt="Java Layered Architecture" height="100">

1. **Controller:** 손님 맞이 (요청 검증)
2. **Service:** 요리사 (비즈니스 로직)
3. **Repository:** 창고지기 (DB 접근)

--

### 데이터 흐름과 DTO

> **DTO (Data Transfer Object):** 데이터를 나르기 위한 바구니

1. **Request (JSON):** `{"id": "user1"}`
2. **Controller:** JSON ➡️ **DTO** 변환
3. **Service:** DTO ➡️ **Entity** 변환 후 로직 수행
4. **Repository:** Entity를 DB에 저장

--

### MSA 서버 간 통신 방식

"주문 서버"가 "상품 서버"에게 데이터를 요청할 때

* **Sync (동기) - Feign Client:**
    * 메소드 호출하듯 HTTP 요청 (`productClient.get()`)
    * 직관적이나 장애 전파 위험
* **Async (비동기) - Kafka/RabbitMQ:**
    * 메시지 큐에 이벤트 발행
    * 느슨한 결합, 장애 격리

---

## 5. MSA 구조와 응답 처리

--

### MSA의 관문, API Gateway

> "앱은 문지기(Gateway)만 알면 된다."

<img src="images/api_gateway.png" alt="API Gateway">

* **Routing:** 주소에 따라 적절한 서버로 연결
* **Auth:** 인증/인가 (입구 컷)

--

### Response Aggregation (비빔밥 패턴)

* **상황:** 메인 화면 (내 정보 + 추천 상품 + 공지)
* **해결 (Gateway):**
    1. 앱은 Gateway에 1번 요청 (`GET /main`)
    2. Gateway가 내부 서버 3곳을 찔러 데이터를 모음
    3. 하나의 JSON으로 합쳐서 응답

---

## 6. HTTP Status Code

--

### Status Code 분류

<img src="images/status_code.png" alt="HTTP Status Codes">

--

### 🚨 400 Bad Request

* **의미:** 문법 오류 또는 필수 정보 누락
* **체크리스트:**
    * 필수 파라미터(`user_id`) 누락?
    * 타입 불일치 (숫자에 문자열)?
    * DTO 유효성 검사(`@NotNull`) 실패?

--

### 🔐 401 vs 403

* **401 Unauthorized:**
    * "신분증 없음" (로그인 풀림, 토큰 만료)
* **403 Forbidden:**
    * "신분증은 있는데 접근 불가" (관리자 페이지 등)

---

## 7. 결론 (Wrap-up)

--

### QC/실무자 체크리스트

1. **스펙 확인:** 에러 시 Swagger 문서 대조
2. **도구 활용:** Charles, ProxyMan으로 실제 JSON 확인
3. **구조적 의심:** MSA 구조상 특정 서비스만 느린지 확인

--

### Q & A

감사합니다.

            </script>
        </section>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/markdown/markdown.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.min.js"></script>

<script>
    // Reveal.js 초기화
    Reveal.initialize({
        controls: true,
        progress: true,
        center: true,
        hash: true,
        slideNumber: true, 
        plugins: [ RevealMarkdown, RevealHighlight ]
    });
</script>

</body>
</html>
